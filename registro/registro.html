<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welfare | Registro </title>
    <link rel="stylesheet" href="./registro.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

</head>
<body>
    <main class="container">
        <!-- Seção-Esquerda | contém o formulário de Login-->
        <form class="login secao-esquerda" id="cadastrar" name="cadastrar" method="post" action="" autocomplete="on">
            <!-- Conteúdo superior do formulario | dados da Sessão -->
            <div class="wrapper  interativo-container">
                <!-- Container-Título -->
                <div class="container_titulo">
                    <h1 class="login_titulo">Registro</h1>
                </div>
                <div class="dados">

                    <section class="sessao_dado 1">
                        <!-- Container-Nome -->
                        <label class="container_nome  login_label" for="nome_funcionario">
                            <span>Nome completo</span>
                            <input maxlength="50" pattern="[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$" class="input " type="text" name="nome_funcionario" id="nome_funcionario">
                        </label>

                        <!-- Container-Cpf -->
                        <label class="container_cpf  login_label" for="cpf_funcionario">
                            <span>Cpf</span>
                            <input oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                            type = "number"
                            maxlength = "11" class="input " name="cpf_funcionario" id="cpf_funcionario">
                            <small>Digite o cpf sem ponto ou traço</small>
                        </label>

                        <!-- Container-Usuario -->
                        <label class="container_usuario  login_label" for="email_funcionario">
                            <span>Email</span>
                            <input class="input " maxlength="100" type="email" name="email_funcionario" id="email_funcionario">
                        </label>
                      
                    </section>
                    <section class="sessao_dado 2">

                        <!-- Container-Cargo -->
                        <label class="container_cargo  login_label" for="cargo_funcionario">
                            <p>Cargo</p>
                            <Select class="selecione" name="cargo_funcionario" id="cargo_funcionario">
                                <option value="">...</option>
                                <option value="3">Recpcionista</option>
                                <option value="2">Médico</option>
                                <option value="1">Admiministrador</option>
                            </Select>
                        </label>
                        <!-- Container-Senha -->
                        <label class="container_senha  login_label" for="senha_funcionario">
                            <span>Senha</span>
                            <input maxlength="60" class="input " type="password" name="senha_funcionario" id="senha_funcionario">
                        </label>
                    </section>
                </div>
            </div>
            <!-- Conteúdo inferior do formulario | Submit e Registrar nova conta -->
            <div class="wrapper  submit_container">
                <!-- Botão de enviar o formulario | Submit --> 
                <input type="submit" id="cadastrar" class="login_button" onclick="Cadastrar()" value="Cadastrar" disabled>
                    
                <!-- Link para registrar nova conta | Página de registro -->
                <a href="#" class="login_link">Já possui um acesso? <span>Faça login</span></a> 
            </div> 
            
            <div id="resposta">
    
            </div>
        </form>
        <!-- Seção-Direita | contém a imagem do Login -->
        <!-- <section class="wallpaper  secao-direita">
        </section> -->
    </main>

<script src="../src/script.js"></script>
<script  type = "module"  src = "https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script> 
<script nomodule src="https://unpkg .com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


<script>
$(document).ready(function() {

$('#cadastrar').submit(function(event) {
    event.preventDefault(); // Impede o envio padrão do formulário

    var dados = new FormData(this); // Serializa os dados do formulário

    $.ajax({
        method: 'POST',
        url: 'controleregistro.php',
        data: dados,
        contentType: false,
        processData: false,
        beforeSend: function() {
            $("h2").html("Processo em andamento.");
        }
    })
    .done(function(msg) {
        $("h2").html("Retorno da Inclusão...");
        $("#resposta").html(msg);
        alert("Dados cadastrados com sucesso!");
    })
    .fail(function() {
        alert("Falha na inclusão");
    });
});

});

</script>
</body>